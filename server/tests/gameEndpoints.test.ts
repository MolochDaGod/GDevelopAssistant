/**
 * GAME ENDPOINTS INTEGRATION TESTS
 * Tests for Overdrive Racing, MMO World, and Swarm RTS endpoints
 */

import { describe, it, expect, beforeAll, afterAll } from 'vitest';\n\nconst BASE_URL = process.env.API_URL || 'http://localhost:3000/api';\n\n// ============================================\n// OVERDRIVE RACING TESTS\n// ============================================\n\ndescribe('Overdrive Racing Endpoints', () => {\n  let raceId: string;\n  let vehicleId: string;\n  \n  it('should get all available tracks', async () => {\n    const response = await fetch(`${BASE_URL}/overdrive/tracks`);\n    expect(response.status).toBe(200);\n    const tracks = await response.json();\n    expect(Array.isArray(tracks)).toBe(true);\n    expect(tracks.length).toBeGreaterThan(0);\n    expect(tracks[0]).toHaveProperty('id');\n    expect(tracks[0]).toHaveProperty('name');\n  });\n\n  it('should get specific track details', async () => {\n    const response = await fetch(`${BASE_URL}/overdrive/tracks/urban_circuit`);\n    expect(response.status).toBe(200);\n    const track = await response.json();\n    expect(track).toHaveProperty('checkpoints');\n    expect(track).toHaveProperty('obstacles');\n    expect(track).toHaveProperty('startLine');\n  });\n\n  it('should create a new race', async () => {\n    const response = await fetch(`${BASE_URL}/overdrive/races`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        trackId: 'urban_circuit',\n        maxPlayers: 4\n      })\n    });\n    expect(response.status).toBe(201);\n    const race = await response.json();\n    expect(race).toHaveProperty('id');\n    expect(race.status).toBe('starting');\n    raceId = race.id;\n  });\n\n  it('should join a race with vehicle', async () => {\n    const response = await fetch(`${BASE_URL}/overdrive/races/${raceId}/join`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ playerId: 'test-player-1' })\n    });\n    expect(response.status).toBe(201);\n    const vehicle = await response.json();\n    expect(vehicle).toHaveProperty('id');\n    expect(vehicle.playerId).toBe('test-player-1');\n    vehicleId = vehicle.id;\n  });\n\n  it('should get race state', async () => {\n    const response = await fetch(`${BASE_URL}/overdrive/races/${raceId}`);\n    expect(response.status).toBe(200);\n    const race = await response.json();\n    expect(race).toHaveProperty('vehicles');\n    expect(race.vehicles.length).toBeGreaterThan(0);\n  });\n\n  it('should get leaderboard', async () => {\n    const response = await fetch(`${BASE_URL}/overdrive/leaderboard?trackId=urban_circuit&limit=10`);\n    expect(response.status).toBe(200);\n    const leaderboard = await response.json();\n    expect(Array.isArray(leaderboard)).toBe(true);\n  });\n});\n\n// ============================================\n// MMO WORLD TESTS\n// ============================================\n\ndescribe('MMO World Endpoints', () => {\n  it('should get sprite animations for character type', async () => {\n    const response = await fetch(`${BASE_URL}/mmo/sprites/animations/warrior`);\n    expect(response.status).toBe(200);\n    const data = await response.json();\n    expect(data).toHaveProperty('characterType');\n    expect(data).toHaveProperty('animations');\n    expect(data.animations).toHaveProperty('idle');\n    expect(data.animations).toHaveProperty('walk');\n    expect(data.animations).toHaveProperty('run');\n    expect(data.animations).toHaveProperty('attack');\n  });\n\n  it('should get sprite sheet for character type', async () => {\n    const response = await fetch(`${BASE_URL}/mmo/sprites/warrior`);\n    expect(response.status).toBe(200);\n    const spriteSheet = await response.json();\n    expect(spriteSheet).toHaveProperty('url');\n    expect(spriteSheet).toHaveProperty('frameWidth');\n    expect(spriteSheet).toHaveProperty('frameHeight');\n    expect(spriteSheet).toHaveProperty('columns');\n  });\n\n  it('should handle invalid character type gracefully', async () => {\n    const response = await fetch(`${BASE_URL}/mmo/sprites/invalid_character`);\n    expect(response.status).toBe(404);\n  });\n});\n\n// ============================================\n// SWARM RTS TESTS\n// ============================================\n\ndescribe('Swarm RTS Endpoints', () => {\n  it('should get all available maps', async () => {\n    const response = await fetch(`${BASE_URL}/rts/maps`);\n    expect(response.status).toBe(200);\n    const maps = await response.json();\n    expect(Array.isArray(maps)).toBe(true);\n    expect(maps.length).toBeGreaterThan(0);\n    expect(maps[0]).toHaveProperty('id');\n    expect(maps[0]).toHaveProperty('name');\n    expect(maps[0]).toHaveProperty('terrain');\n    expect(maps[0]).toHaveProperty('difficulty');\n  });\n\n  it('should get faction systems', async () => {\n    const response = await fetch(`${BASE_URL}/rts/factions`);\n    expect(response.status).toBe(200);\n    const factions = await response.json();\n    expect(Array.isArray(factions)).toBe(true);\n    expect(factions.length).toBeGreaterThan(0);\n    expect(factions[0]).toHaveProperty('id');\n    expect(factions[0]).toHaveProperty('name');\n    expect(factions[0]).toHaveProperty('playstyle');\n    expect(factions[0]).toHaveProperty('units');\n  });\n\n  it('should get gameplay systems', async () => {\n    const response = await fetch(`${BASE_URL}/rts/gameplay-systems`);\n    expect(response.status).toBe(200);\n    const systems = await response.json();\n    expect(systems).toHaveProperty('unitSpawning');\n    expect(systems).toHaveProperty('resourceManagement');\n    expect(systems).toHaveProperty('combatSystem');\n    expect(systems).toHaveProperty('fogOfWar');\n    expect(systems).toHaveProperty('cityControl');\n  });\n});\n\n// ============================================\n// HEALTH CHECK TEST\n// ============================================\n\ndescribe('Health Check', () => {\n  it('should return 200 on health check', async () => {\n    const response = await fetch(`${BASE_URL.replace('/api', '')}/health`);\n    expect(response.status).toBe(200);\n    const health = await response.json();\n    expect(health).toHaveProperty('status');\n    expect(['healthy', 'degraded']).toContain(health.status);\n  });\n});\n"
    ,